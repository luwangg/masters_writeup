\subsection{Radio Frequency Signals and Antennas}
Some RF fundamentls used for modelling.

\section{Model from electronic warfare target location method}

The model which will be discussed here is that presented in \cite{poisel2012electronic}.  

Let there be an array of $M$ antenna elements receiving signals, where the position of of the \(m\)th element is \(\vec{x}_{m} = \begin{bmatrix}x_m & y_m & z_m \end{bmatrix}\).
The signal received by this \(m\)th element is influenced by the element position. 
This can be represented as \(\vec{r}_m(t, \vec{x}_m)\), showing that the signal at the \(m\)th element is a function of the position of the element.
As discussed by \cite{krim1996two}, this model contains both spacial and temporal information and hence is sufficient to be able to attain spacial information about the signal. 

It is further shown by Poisel that the delay time for a signal arriving at the \(m\)th sensor from a source located at azimuth angle \(\theta\) and elevation angle \(\phi\) is
\begin{align}
 \tau_m(\vec{\theta}) &= \tau_m ( \begin{bmatrix} \theta \\ \phi \end{bmatrix} ) \\
                       &= \frac{1}{c} [ x_m\cos(\theta)\cos(\phi) + y_m\sin(\theta)\cos(\phi) + z_m\sin(\phi) ]
\end{align}
This model assumes that the azimuth and elevation angle to the source, \(\begin{bmatrix}\theta & \phi\end{bmatrix}\TRANSPOSE\), is the same for each sensor. This is approximately true when the distance from the array to the source is much greater than the array geometry. Hence, it's often convenient and most accurate to select the center of the array as the origin. 
For a 2D space we let \(\phi = 0\) and hence simplify to:
\begin{equation}
 \tau_m(\theta) = \frac{1}{c} [ x_m\cos(\theta) + y_m\sin(\theta) ]
\end{equation}
Expressed as a matrix multiply:
\begin{align}
\tau_m(\theta) &= \frac{1}{c}\begin{bmatrix}x_m & y_m\end{bmatrix}\begin{bmatrix}\cos\theta\\ \sin\theta\end{bmatrix} \\
          &= \frac{1}{c} \vec{x}_m \vec{k}(\theta)
\end{align}
Where \(\vec{k}(\theta) = \begin{bmatrix}\cos\theta& \sin\theta\end{bmatrix}\TRANSPOSE\) is the wavenumber vector which graphically equates to the 'ratio' of how much the signal propagates in the x direction per distance propagated in the y direction. It's not really a ratio, it's a vector, so this doesn't quite makes sense. Note to self: tidy this up.

If this time delay is multiplied by the frequency in radians per second, \(\omega\), the result is the phase difference at the element relative to the origin:
\begin{align}
  \phi_m(\theta, \omega) &= \omega\tau_m(\theta) \\
                         &= \frac{\omega \vec{x}_m \vec{k}(\theta)}{c} \\
                         &= \frac{ \vec{x}_m \vec{k}(\theta) }{\lambda}
\end{align}

Representing the phase shift of all M sensors as a vector,
\begin{equation}
  \vec{\phi}(\theta, \omega) = \frac{\mathbf{X}\vec{k}(\theta)}{\lambda}
\end{equation}
Where \(\mathbf{X}\) is a \((M \times 2)\) matrix containing the \(x\) and \(y\) coordinates of each of the M sensors. 
In general, the output of an array is also impacted by the amplitude scaling and phase shifting applied to the received signals by the beam pattern of each sensor. The combination of the phase shift resulting from the physical separation of the sensors and the amplitude/phase response of a sensor is a very key property of an array known as the antenna array manifold, or steering vector, or source-position vector:
\begin{equation}
  \boxed{
    \vec{a}(\theta, \omega) = \vec{g}(\theta, \omega) \odot \exp \left\{ j \frac{\omega \mathbf{X} \vec{k}(\theta)}{c} \right\}
  }
\end{equation}

Often (as is the case in this project) the sensors used will be identical omnidirectional antennas. In this case, the amplitude and phase shift of the antennas as a result can be ignored, as it will be equal between elements and independent of angle or arrival. 
\begin{equation}
  \vec{a}(\theta, \omega) = \exp \left\{ j \frac{\omega \mathbf{X} \vec{k}(\theta)}{c} \right\}
\end{equation}

Or, more verbose:
\begin{align}
\vec{a}(\theta, \omega) &= \exp \left\{ \frac{j \omega}{c} \begin{bmatrix} x_1, y_1 \\ x_2, y_2 \\ .., .. \\ x_M, y_M \end{bmatrix} \begin{bmatrix} \cos(\theta) \\ \sin(\theta) \end{bmatrix} \right\} \\
                        &= \exp \left\{ \frac{j \omega}{c} \begin{bmatrix} x_1\cos(\theta) + y_1\sin(\theta) \\ x_2\cos(\theta) + y_2\sin(\theta)) \\ .., .. \\ x_M\cos(\theta) + y_M\sin(\theta) \end{bmatrix} \right\} \\
\end{align}

The vector output of the array, \(\vec{r}(t)\), where each element of the vector is the signal received by the sensor is the where each element of the vector corresponds to an antenna element is equal to the sum of the signals at that element by the principle of superposition. Algebraically:
\begin{equation}
  \vec{r}(t) = \sum_{k=1}^{K} s_k(t)\vec{a}_k(\vec{\theta}_k) + \vec{n}(t)
\end{equation}
Where:
\begin{itemize}
  \item \(s_k(t)\) is the source signal,
  \item \(\vec{\theta}_k = \begin{bmatrix} \phi_k, \theta_k \end{bmatrix}\TRANSPOSE\) is the source parameter vector, a vector with azimuth and elevation angles pointing in the direction of the source,
  \item \(\vec{a}_k(\vec{\theta}_k)\) is the antenna array manifold, explored more shortly,
  \item \(\vec{n}(t)\) is additive noise.
\end{itemize}

Or in matrix notation:
\begin{align}
  \vec{r}(t) = \mathbf{A}(\vec{\theta})\vec{s}(t) + \vec{n}(t)
\end{align}

The array manifold vector is also known as source position vector or as the steering vector. It is the response of the array to a signal impinging on the array from a certain azimuth and elevation angle, \((\phi, \theta)\). The response is naturally in terms of the gain and phase shifts introduced by each sensor as a result of the beam pattern and physical separation of the sensors. It is given by:
\cite{dacos1995estimating}.
\begin{equation}
\vec{a}(\theta, \phi) = \vec{g}(\theta, \phi) \odot \exp \left\{ -j \mathbf{X}\TRANSPOSE \vec{k}(\theta,\phi) \right\}
\end{equation}
Where:
\begin{itemize}
  \item \(\vec{g}(\theta, \phi)\) is a \(N\)-dimensional vector of complex number being the gain and phase response  of each element in the direction \((\theta, \phi)\). 
\item \(\mathbf{X}\TRANSPOSE\) is a \((N \times 3)\) matrix containing the \(x\), \(y\) and \(z\) coordinates of each of the N elements of the form \(\begin{bmatrix} \vec{x}, \vec{y}, \vec{z} \end{bmatrix}\TRANSPOSE\)
\item \(\vec{k}(\theta, \phi)\) is the wavenumber vector given by \(\vec{k}(\theta, \phi) = \pi \begin{bmatrix} \cos\theta\cos\phi, \sin\theta\cos\phi, \sin\phi \end{bmatrix}\TRANSPOSE \). Graphically, this equates to the 
\end{itemize}
For the purposes of this research the elements will all be located at the same elevation as we only with to locate terrestrial signals. Hence, this may be simplified to:
\begin{equation}
  \vec{a}(\theta) = \vec{g}(\theta) \odot \exp \left\{ -j \mathbf{X}\TRANSPOSE \vec{k}(\theta) \right\}
\end{equation}
Here, \(\mathbf{X}\TRANSPOSE\) is now a \((N \times 2)\) matrix of the form \(\begin{bmatrix} \vec{x}, \vec{y} \end{bmatrix}\) and \(\vec{k}(\theta) = \pi[\cos(\theta), \sin(\theta)]\TRANSPOSE\).

Furthermore, the \(\vec{g}\) term may be excluded if we assume omnidirectional elements. Although it is rare to deal with true omnidirectional antennas, for an antenna which is required to receive signals only in the azimuth plane, omnidirectional antennas such as dipoles might very well be used in practice. This hence simplifies to:

\begin{equation}
  \vec{a}(\theta) = \exp \left\{ -j \mathbf{X}\TRANSPOSE \vec{k}(\theta) \right\}
\end{equation}



The antenna array manifold can now be re-written:
\begin{align}
\vec{a}(\theta) &= 
  \exp \left\{ -j \begin{bmatrix} 
      \omega_c \tau_1(\phi_k)\\ 
      \omega_c \tau_2(\phi_k)\\ 
      \omega_c \tau_M(\phi_k) 
   \end{bmatrix} \right\} \\
  &= \begin{bmatrix}
      e^{-j\omega_c \tau_1(\phi_k)} \\
      e^{-j\omega_c \tau_2(\phi_k)} \\
      ... \\
      e^{-j\omega_c \tau_M(\phi_k)} \\
   \end{bmatrix}
\end{align}

Clearly, this is simply a vector of phase shifts introduced by each element in the array as a function of both the location of the element and the angle of the incident wave relative to some defined zero location and zero direction. It is said by \cite{dacos1995estimating} that this array manifold completely characterises the array. That paper goes into additional details on how the manifold may simplified for linear arrays, as well as the special properties which a manifold of a linear array possesses. This will not be discussed here as the array used for this DF system is not likely to be linear. 

Let there be $K$ individual signal sources, where $\vec{s}(t)$ represents the resultant signal, being
\begin{equation}
\vec{s}(t) = \begin{bmatrix} s_{1}(t) & s_{2}(t) & s_3(t) & ... & s_K(t) \end{bmatrix}
\end{equation}

This important result shows us that for a known array with omnidirectional antennas at arbitrary \(x)\) and \(y\) locations, receiving a narrow band signal of known frequency from a certain direction, \(\theta\), the phase shift at each element is a vector which can be easily calculated. This is the basis around which the direction finding algorithm for this project will be designed. 
